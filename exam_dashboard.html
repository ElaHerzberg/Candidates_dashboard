<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>דשבורד מבחן מיון</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;600;800;900&family=JetBrains+Mono:wght@400;600&display=swap');
:root{--bg:#09080f;--s1:#100e1a;--s2:#17152a;--border:#24203a;--text:#e0d8f5;--muted:#cacbce;
  --JR:#f5c842;--A:#3ecf8e;--BG:#4db8ff;--FAIL:#ff5f72;--COND:#c47fff;--NONE:#3a3558;}
*{box-sizing:border-box;margin:0;padding:0;}
body{background:var(--bg);background-image:radial-gradient(ellipse 60% 50% at 20% 0%,rgba(77,184,255,.05),transparent 55%),radial-gradient(ellipse 40% 35% at 80% 100%,rgba(62,207,142,.04),transparent 55%);color:var(--text);font-family:'Heebo',sans-serif;padding:2.2rem 1.4rem 5rem;min-height:100vh;}
.wrap{max-width:1260px;margin:0 auto;}
header{border-bottom:1px solid var(--border);padding-bottom:1.4rem;margin-bottom:2rem;display:flex;justify-content:space-between;align-items:flex-end;flex-wrap:wrap;gap:1rem;}
h1{font-size:clamp(1.4rem,3vw,2rem);font-weight:900;letter-spacing:-.03em;}
h1 em{font-style:normal;color:var(--BG);}
.meta{font-family:'JetBrains Mono',monospace;font-size:.75rem;color:var(--muted);text-align:left;}
.kpi-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:.9rem;margin-bottom:1.4rem;}
.kpi{background:var(--s1);border:1px solid var(--border);border-radius:12px;padding:1rem;text-align:center;}
.kpi-n{font-size:1.85rem;font-weight:900;font-family:'JetBrains Mono',monospace;line-height:1;}
.kpi-l{font-size:.72rem;color:var(--muted);margin-top:.3rem;}
.kpi-s{font-size:.63rem;color:var(--muted);opacity:.65;margin-top:.12rem;}
.g2{display:grid;grid-template-columns:repeat(auto-fit,minmax(370px,1fr));gap:1.1rem;}
.card{background:var(--s1);border:1px solid var(--border);border-radius:14px;padding:1.4rem 1.6rem 1.1rem;position:relative;overflow:hidden;}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;border-radius:14px 14px 0 0;}
.cBG::before{background:linear-gradient(90deg,var(--BG),#1e90e8);}
.cA::before{background:linear-gradient(90deg,var(--A),#0a9e65);}
.cJR::before{background:linear-gradient(90deg,var(--JR),#c8a000);}
.cF::before{background:linear-gradient(90deg,var(--FAIL),#c0283a);}
.cM::before{background:linear-gradient(90deg,var(--BG),var(--A),var(--JR),var(--FAIL));}
.card.full{grid-column:1/-1;}
.ct{font-family:'JetBrains Mono',monospace;font-size:.68rem;letter-spacing:.1em;text-transform:uppercase;color:var(--muted);margin-bottom:1.1rem;}
.ch{position:relative;}
.ins{margin-top:.9rem;padding:.7rem 1rem;border-radius:0 8px 8px 0;border-right:2px solid var(--BG);background:var(--s2);font-size:.81rem;color:#9898c0;line-height:1.6;}
.ins strong{color:var(--text);}
.ins.iA{border-color:var(--A);} .ins.iJR{border-color:var(--JR);} .ins.iF{border-color:var(--FAIL);}
.sec{display:flex;align-items:center;gap:.7rem;margin:2rem 0 .9rem;}
.sec-n{font-family:'JetBrains Mono',monospace;font-size:.75rem;font-weight:600;color:var(--BG);opacity:.5;}
.sec-t{font-family:'JetBrains Mono',monospace;font-size:.68rem;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);}
.sec::after{content:'';flex:1;height:1px;background:var(--border);}
/* Level legend */
.lvl-legend{display:flex;gap:1rem;flex-wrap:wrap;margin-bottom:.6rem;}
.lvl-item{display:flex;align-items:center;gap:.4rem;font-size:.75rem;color:var(--muted);}
.lvl-dot{width:10px;height:10px;border-radius:50%;}
@media(max-width:600px){.g2{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div class="wrap">
<header>
  <div>
    <h1>ניתוח <em>מבחן מיון מדריכים</em></h1>
    <p style="color:var(--muted);font-size:.84rem;margin-top:.3rem">סינון ראשוני — ציונים אוטומטיים + בדיקה ידנית</p>
  </div>
  <div class="meta">853 מועמדים · רמות: ג'וניור &lt; א' &lt; ב'/ג'</div>
</header>

<!-- Level guide -->
<div class="lvl-legend">
  <div class="lvl-item"><div class="lvl-dot" style="background:var(--JR)"></div>ג'וניור (רמה בסיסית)</div>
  <div class="lvl-item"><div class="lvl-dot" style="background:var(--A)"></div>א' (רמה בינונית)</div>
  <div class="lvl-item"><div class="lvl-dot" style="background:var(--BG)"></div>ב'/ג' (רמה גבוהה)</div>
  <div class="lvl-item"><div class="lvl-dot" style="background:var(--FAIL)"></div>לא עבר</div>
  <div class="lvl-item"><div class="lvl-dot" style="background:var(--COND)"></div>תנאי ראיון</div>
</div>

<!-- KPIs -->
<div class="kpi-row">
  <div class="kpi"><div class="kpi-n" style="color:var(--BG)">249</div><div class="kpi-l">עברו ב'/ג'</div><div class="kpi-s">רמה גבוהה · 29%</div></div>
  <div class="kpi"><div class="kpi-n" style="color:var(--A)">186</div><div class="kpi-l">עברו א'</div><div class="kpi-s">רמה בינונית · 22%</div></div>
  <div class="kpi"><div class="kpi-n" style="color:var(--JR)">197</div><div class="kpi-l">עברו ג'וניור</div><div class="kpi-s">רמה בסיסית · 23%</div></div>
  <div class="kpi"><div class="kpi-n" style="color:var(--FAIL)">158</div><div class="kpi-l">לא עברו</div><div class="kpi-s">18% מסוננו</div></div>
  <div class="kpi"><div class="kpi-n" style="color:var(--COND)">55</div><div class="kpi-l">תנאי ראיון</div><div class="kpi-s">6% להמשך</div></div>
</div>

<div class="sec"><span class="sec-n">01</span><span class="sec-t">התפלגות והשוואת ציונים</span></div>
<div class="g2">

  <div class="card cM">
    <div class="ct">התפלגות החלטות (ג'וניור ↑ א' ↑ ב'/ג')</div>
    <div class="ch" style="height:250px"><canvas id="donut"></canvas></div>
    <div class="ins"><strong>ב'/ג' הכי שכיחה (29%)</strong> — יותר ממועמדי א'. ג'וניור (23%) ונכשלים (18%) קרובים. קבוצת תנאי קטנה (6%) אך משמעותית.</div>
  </div>

  <div class="card cBG">
    <div class="ct">ממוצע ציונים לפי החלטה — ג'וניור ↑ א' ↑ ב'/ג'</div>
    <div class="ch" style="height:250px"><canvas id="radar"></canvas></div>
    <div class="ins">ציון א' הוא <strong>המבדיל הקריטי</strong> בין רמות: ב'/ג' ← 75, א' ← 62, ג'וניור ← 17. ציון ג'וניור גבוה לכולם — לא מבדיל.</div>
  </div>

</div>

<div class="sec"><span class="sec-n">02</span><span class="sec-t">ציון א' — המבדיל הקריטי</span></div>
<div class="g2">

  <div class="card cA">
    <div class="ct">התפלגות ציון א' לפי החלטה (0 = אדום, 100 = ירוק)</div>
    <div class="ch" style="height:270px"><canvas id="stackedA"></canvas></div>
    <div class="ins iA"><strong>79%</strong> מהנכשלים קיבלו 0 בא'. <strong>62%</strong> מעברי ב'/ג' קיבלו 100. ציון א' מחלק את הקבוצות הכי חד מכל ציון אחר.</div>
  </div>

  <div class="card cJR">
    <div class="ct">ציון 100 אוטומטי לב'/ג' → החלטה ידנית בפועל</div>
    <div class="ch" style="height:270px"><canvas id="autoGap"></canvas></div>
    <div class="ins iJR">מתוך <strong>483</strong> שקיבלו 100 אוטומטי לב'/ג' — רק <strong>48%</strong> אכן עברו לב'/ג'. <strong>52% ירדו רמה בבדיקה ידנית</strong> — הציון האוטומטי לא מספיק.</div>
  </div>

</div>

<div class="sec"><span class="sec-n">03</span><span class="sec-t">נושאים בהערות בודקים לפי רמה</span></div>
<div class="card full cM">
  <div class="ct">% הערות המזכירות נושא — לפי החלטה סופית (ג'וניור ↑ א' ↑ ב'/ג')</div>
  <div class="ch" style="height:300px"><canvas id="keywords"></canvas></div>
  <div class="ins">
    <strong>ירושה</strong> — מבדיל חד בין א' לב'/ג': 41% ב-א' לעומת 29% בב'/ג'. 
    <strong>AI</strong> — גבוה בתנאי (25%) — הסיבה לאי-ודאות. 
    <strong>ליבי וסיבובים</strong> — חוצים כל הרמות, לא מבדילים.
  </div>
</div>

<div class="sec"><span class="sec-n">04</span><span class="sec-t">פרופיל נכשלים וקבוצת תנאי</span></div>
<div class="g2">

  <div class="card cF">
    <div class="ct">התפלגות ציון ב'/ג' לפי החלטה</div>
    <div class="ch" style="height:270px"><canvas id="bgDist"></canvas></div>
    <div class="ins iF">אצל <strong>נכשלים: 66% קיבלו 0</strong> בב'/ג', אך 28% קיבלו 100 — ונכשלו על ליבי/הוראות. המבחן הטכני לא תמיד מנבא כשל.</div>
  </div>

  <div class="card cBG">
    <div class="ct">קבוצת תנאי — פרופיל ייחודי לעומת שאר הקבוצות</div>
    <div class="ch" style="height:270px"><canvas id="condProfile"></canvas></div>
    <div class="ins">תנאי: ציון ב'/ג' גבוה (70) + ציון א' נמוך (30). <strong>הפרופיל: חזק טכנית ברמה בסיסית, חלש ברמת א'.</strong> AI חשד גבוה (25%) — הסיבה לאי-ודאות.</div>
  </div>

</div>
</div>

<script>
const C={BG:'#4db8ff',A:'#3ecf8e',JR:'#f5c842',FAIL:'#ff5f72',COND:'#c47fff',NONE:'#3a3558'};
function rgba(h,a){const r=parseInt(h.slice(1,3),16),g=parseInt(h.slice(3,5),16),b=parseInt(h.slice(5,7),16);return `rgba(${r},${g},${b},${a})`;}
Chart.defaults.color='#6a6090';Chart.defaults.font={family:"'Heebo',sans-serif",size:11};
Chart.defaults.plugins.legend.labels.boxWidth=9;Chart.defaults.plugins.legend.labels.padding=10;
const GC='#24203a';

// Labels in order: JR < A < BG
const GRP_LABELS = ["ג'וניור","א'","ב'/ג'","לא עבר","תנאי"];
const GRP_COLORS = [C.JR, C.A, C.BG, C.FAIL, C.COND];

// 1. Donut - correct order
new Chart(document.getElementById('donut'),{type:'doughnut',data:{
  labels:["ב'/ג' (249)","א' (186)","ג'וניור (197)","לא עבר (158)","תנאי (55)"],
  datasets:[{data:[249,186,197,158,55],backgroundColor:[C.BG,C.A,C.JR,C.FAIL,C.COND],borderColor:'#100e1a',borderWidth:3,hoverOffset:7}]
},options:{cutout:'63%',responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'right',labels:{color:'#b0a8d8',font:{size:10}}}}}});

// 2. Radar - correct order JR < A < BG
new Chart(document.getElementById('radar'),{type:'radar',data:{
  labels:["ציון ג'וניור","ציון א'","ציון ב'/ג'"],
  datasets:[
    {label:"ב'/ג'",data:[93.5,75.4,94.8],borderColor:C.BG,backgroundColor:rgba(C.BG,.12),pointBackgroundColor:C.BG,borderWidth:2},
    {label:"א'",   data:[93.0,61.6,58.8],borderColor:C.A, backgroundColor:rgba(C.A,.08), pointBackgroundColor:C.A, borderWidth:2},
    {label:"ג'וניור",data:[88.8,17.1,43.3],borderColor:C.JR,backgroundColor:rgba(C.JR,.08),pointBackgroundColor:C.JR,borderWidth:2},
    {label:"לא עבר",data:[69.9,9.5,31.2],borderColor:C.FAIL,backgroundColor:rgba(C.FAIL,.08),pointBackgroundColor:C.FAIL,borderWidth:2},
    {label:"תנאי",  data:[84.5,29.6,69.7],borderColor:C.COND,backgroundColor:rgba(C.COND,.08),pointBackgroundColor:C.COND,borderWidth:2},
  ]
},options:{responsive:true,maintainAspectRatio:false,scales:{r:{min:0,max:100,ticks:{stepSize:25,backdropColor:'transparent',color:'#3a3558',font:{size:9}},grid:{color:'#24203a'},angleLines:{color:'#24203a'},pointLabels:{color:'#b0a8d8',font:{size:11,weight:'600'}}}},plugins:{legend:{position:'bottom',labels:{color:'#b0a8d8',font:{size:10}}}}}});

// 3. Stacked A score — order: BG, A, JR, FAIL, COND
new Chart(document.getElementById('stackedA'),{type:'bar',data:{
  labels:["ג'וניור","א'","ב'/ג'","לא עבר","תנאי"],
  datasets:[
    {label:'100',data:[7.6,48.4,62.7,2.5,12.7],backgroundColor:rgba(C.A,.85),borderRadius:3},
    {label:'50-74',data:[6.1,12.4,11.6,3.2,7.3],backgroundColor:rgba(C.A,.5)},
    {label:'1-49',data:[16.2,15.1,14.9,14.6,36.4],backgroundColor:rgba(C.A,.3)},
    {label:'0',data:[70.1,24.2,10.8,79.7,43.6],backgroundColor:rgba(C.FAIL,.55)},
  ]
},options:{responsive:true,maintainAspectRatio:false,scales:{x:{stacked:true,grid:{color:GC},ticks:{color:'#b0a8d8'}},y:{stacked:true,max:100,grid:{color:GC},ticks:{color:'#6a6090',callback:v=>v+'%'}}},plugins:{legend:{position:'bottom',labels:{color:'#b0a8d8',font:{size:10}}}}}});

// 4. Auto 100 BG → actual decision
new Chart(document.getElementById('autoGap'),{type:'bar',data:{
  labels:["עבר ב'/ג'","עבר א'","עבר ג'וניור","לא עבר","תנאי"],
  datasets:[{label:'מועמדים עם ציון אוטומטי 100',data:[230,102,73,44,34],backgroundColor:[C.BG,C.A,C.JR,C.FAIL,C.COND],borderRadius:6}]
},options:{indexAxis:'y',responsive:true,maintainAspectRatio:false,scales:{x:{grid:{color:GC},ticks:{color:'#6a6090'}},y:{grid:{display:false},ticks:{color:'#b0a8d8'}}},plugins:{legend:{display:false}}}});

// 5. Keywords — correct level order
new Chart(document.getElementById('keywords'),{type:'bar',data:{
  labels:['ליבי','סיבובים','קוד לא רץ','ירושה','יחס אישי','AI'],
  datasets:[
    {label:"ג'וניור",data:[90,77,50,22,26,10],backgroundColor:rgba(C.JR,.8),borderRadius:4},
    {label:"א'",    data:[89,78,56,41,25,5], backgroundColor:rgba(C.A,.8)},
    {label:"ב'/ג'", data:[86,68,61,29,22,15],backgroundColor:rgba(C.BG,.8)},
    {label:"לא עבר",data:[81,57,44,10,13,11],backgroundColor:rgba(C.FAIL,.8)},
    {label:"תנאי",  data:[95,95,85,40,11,25],backgroundColor:rgba(C.COND,.8)},
  ]
},options:{responsive:true,maintainAspectRatio:false,scales:{x:{grid:{color:GC},ticks:{color:'#b0a8d8'}},y:{grid:{color:GC},ticks:{color:'#6a6090',callback:v=>v+'%'},max:100}},plugins:{legend:{position:'bottom',labels:{color:'#b0a8d8',font:{size:10}}}}}});

// 6. BG dist
new Chart(document.getElementById('bgDist'),{type:'bar',data:{
  labels:["ג'וניור","א'","ב'/ג'","לא עבר","תנאי"],
  datasets:[
    {label:'100',data:[37.1,54.8,92.4,27.8,61.8],backgroundColor:rgba(C.BG,.85),borderRadius:3},
    {label:'50-74',data:[7.1,3.2,3.2,4.4,10.9],backgroundColor:rgba(C.BG,.45)},
    {label:'1-49',data:[4.6,5.4,0.8,1.3,1.8],backgroundColor:rgba(C.BG,.25)},
    {label:'0',data:[51.3,36.6,3.6,66.5,25.5],backgroundColor:rgba(C.FAIL,.55)},
  ]
},options:{responsive:true,maintainAspectRatio:false,scales:{x:{stacked:true,grid:{color:GC},ticks:{color:'#b0a8d8'}},y:{stacked:true,max:100,grid:{color:GC},ticks:{color:'#6a6090',callback:v=>v+'%'}}},plugins:{legend:{position:'bottom',labels:{color:'#b0a8d8',font:{size:10}}}}}});

// 7. Conditional profile
new Chart(document.getElementById('condProfile'),{type:'bar',data:{
  labels:["ג'וניור","א'","ב'/ג'","לא עבר","תנאי"],
  datasets:[
    {label:"ציון ג'וניור",data:[88.8,93.0,93.5,69.9,84.5],backgroundColor:[rgba(C.JR,.35),rgba(C.JR,.35),rgba(C.JR,.35),rgba(C.JR,.35),C.JR],borderRadius:4},
    {label:"ציון א'",     data:[17.1,61.6,75.4,9.5,29.6], backgroundColor:[rgba(C.A,.35),rgba(C.A,.35),rgba(C.A,.35),rgba(C.A,.35),C.A],  borderRadius:4},
    {label:"ציון ב'/ג'",  data:[43.3,58.8,94.8,31.2,69.7],backgroundColor:[rgba(C.BG,.35),rgba(C.BG,.35),rgba(C.BG,.35),rgba(C.BG,.35),C.BG],borderRadius:4},
  ]
},options:{responsive:true,maintainAspectRatio:false,scales:{x:{grid:{color:GC},ticks:{color:'#b0a8d8'}},y:{grid:{color:GC},ticks:{color:'#6a6090'},max:100}},plugins:{legend:{position:'bottom',labels:{color:'#b0a8d8',font:{size:10}}}}}});
</script>
</body>
</html>
